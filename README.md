# Terraform test with localstack

Objectives
- Testing terraform code with built-in subcommand `terraform test` (experimental feature with v0.15 release)
- Use `localstack` for integration testing

Requirements
- Docker for Mac
- Terraform v1.3.2
- Localstack v1.2

Installing Terraform

```bash
$ curl https://releases.hashicorp.com/terraform/1.3.2/terraform_1.3.2_darwin_arm64.zip -o tf.zip
$ unzip tf.zip && chmod +x terraform
$ terraform version
Terraform v1.3.2
on darwin_arm64
```

Installing Localstack
```bash
$ pip3 install localstack
$ localstack start -d

 ğŸ’» LocalStack CLI 1.2.0

Starting LocalStack in Docker mode ğŸ³
    preparing environment
    configuring container
    starting container                       
    detaching
    
$ localstack status services
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ Service                  â”ƒ Status      â”ƒ
â”¡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”©
â”‚ acm                      â”‚ âœ” available â”‚
â”‚ apigateway               â”‚ âœ” available â”‚
â”‚ cloudformation           â”‚ âœ” available â”‚
â”‚ cloudwatch               â”‚ âœ” available â”‚
â”‚ config                   â”‚ âœ” available â”‚
â”‚ dynamodb                 â”‚ âœ” available â”‚
â”‚ dynamodbstreams          â”‚ âœ” available â”‚
â”‚ ec2                      â”‚ âœ” available â”‚
â”‚ es                       â”‚ âœ” available â”‚
â”‚ events                   â”‚ âœ” available â”‚
â”‚ firehose                 â”‚ âœ” available â”‚
â”‚ iam                      â”‚ âœ” available â”‚
â”‚ kinesis                  â”‚ âœ” available â”‚
â”‚ kms                      â”‚ âœ” available â”‚
â”‚ lambda                   â”‚ âœ” available â”‚
â”‚ logs                     â”‚ âœ” available â”‚
â”‚ opensearch               â”‚ âœ” available â”‚
â”‚ redshift                 â”‚ âœ” available â”‚
â”‚ resource-groups          â”‚ âœ” available â”‚
â”‚ resourcegroupstaggingapi â”‚ âœ” available â”‚
â”‚ route53                  â”‚ âœ” available â”‚
â”‚ route53resolver          â”‚ âœ” available â”‚
â”‚ s3                       â”‚ âœ” available â”‚
â”‚ s3control                â”‚ âœ” available â”‚
â”‚ secretsmanager           â”‚ âœ” available â”‚
â”‚ ses                      â”‚ âœ” available â”‚
â”‚ sns                      â”‚ âœ” available â”‚
â”‚ sqs                      â”‚ âœ” available â”‚
â”‚ ssm                      â”‚ âœ” available â”‚
â”‚ stepfunctions            â”‚ âœ” available â”‚
â”‚ sts                      â”‚ âœ” available â”‚
â”‚ support                  â”‚ âœ” available â”‚
â”‚ swf                      â”‚ âœ” available â”‚
â”‚ transcribe               â”‚ âœ” available â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

